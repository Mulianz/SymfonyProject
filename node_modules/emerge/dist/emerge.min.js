"use strict";function readAtPath(e,t){if(isPrimitive(t))throw TypeError("path must be an array-like, got: "+t);if(!t.length)return e;for(var r=-1;++r<t.length;){if(isPrimitive(e))return void 0;var n=t[r];e=e[n]}return e}function replaceAtRoot(e,t){var r=replaceIfNotPatchable(e,t);if(r!==secret)return r;if(deepEqual(e,t))return e;var n={};return each(Object.keys(t),function(r){var i=replaceAtRoot(e[r],t[r]);void 0!==i&&(n[r]=i)}),Object.freeze(n)}function mergeAtRoot(e,t){var r=replaceIfNotPatchable(e,t);if(r!==secret)return r;var n={};each(Object.keys(t),function(r){var i=mergeAtRoot(e[r],t[r]);is(e[r],i)||(n[r]=i)});var i=Object.keys(n);if(i.length){var o=function(){var t={};return each(Object.keys(e),function(r){t[r]=e[r]}),each(Object.keys(n),function(e){void 0===n[e]?delete t[e]:t[e]=n[e]}),{v:Object.freeze(t)}}();if("object"==typeof o)return o.v}return e}function replaceAtPath(e,t,r){if(isPrimitive(r))throw TypeError("path must be an array-like, got: "+r);if(!r.length)return replaceAtRoot(e,t);var n={},i=n;return each(r,function(e,n){i=i[e]=n<r.length-1?{}:t}),setNext=t,mergeAtRoot(e,n)}function mergeAtPath(e,t,r){if(isPrimitive(r))throw TypeError("path must be an array-like, got: "+r);if(!r.length)return mergeAtRoot(e,t);var n={},i=n;return each(r,function(e,n){i=i[e]=n<r.length-1?{}:t}),mergeAtRoot(e,n)}function replaceIfNotPatchable(e,t){return e===t?e:isPrimitive(e)?cloneDeep(t):isPrimitive(t)?t:e instanceof Array?deepEqual(e,t)?e:cloneDeep(t):t===setNext?(setNext=secret,replaceAtRoot(e,t)):secret}function deepEqual(e,t){if(e===t)return!0;if(isPrimitive(e)&&isPrimitive(t))return is(e,t);if(isPrimitive(e)!==isPrimitive(t))return!1;if("function"==typeof e&&"function"==typeof t)return e===t;if(e instanceof Array!=t instanceof Array)return!1;if(e instanceof Array&&t instanceof Array)return e.length!==t.length?!1:e.every(function(e,r){return deepEqual(e,t[r])});var r=Object.keys(e);return r.length!==Object.keys(t).length?!1:r.every(function(r){return r in t&&deepEqual(e[r],t[r])})}function isPrimitive(e){return null==e||"object"!=typeof e&&"function"!=typeof e}function is(e,t){return e===t||e!==e&&t!==t}function cloneDeep(e){if(isPrimitive(e))return e;if(e instanceof Array)return Object.freeze(e.map(cloneDeep));var t={};return each(Object.keys(e),function(r){t[r]=cloneDeep(e[r])}),Object.freeze(t)}function immute(e){return isPrimitive(e)?e:(e instanceof Array?each(e,immute):each(Object.keys(e),function(t){immute(e[t])}),Object.freeze(e))}function each(e,t){for(var r=-1;++r<e.length;)t(e[r],r)}var secret="function"==typeof Symbol?Symbol():(Math.random()*Math.pow(10,16)).toString(16),setNext=secret;exports.readAtPath=readAtPath,"undefined"!=typeof process&&process.env.TESTING&&(exports.replaceAtRoot=replaceAtRoot),"undefined"!=typeof process&&process.env.TESTING&&(exports.mergeAtRoot=mergeAtRoot),exports.replaceAtPath=replaceAtPath,exports.mergeAtPath=mergeAtPath,exports.deepEqual=deepEqual,exports.immute=immute;