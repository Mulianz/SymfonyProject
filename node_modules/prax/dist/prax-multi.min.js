"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function autorun(e){if("function"!=typeof e)throw Error("Expected a function, got: "+e);var t=global[key],n=global[key]=[];try{stop(e),e(),n.forEach(function(t){add(t,e)}),e[lowkey]=n}finally{global[key]=t}return e}function stop(e){e&&e[lowkey]&&e[lowkey].splice(0).forEach(function(t){var n=t.indexOf(e);~n&&t.splice(n,1)})}function add(e,t){~e.indexOf(t)||e.push(t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),global=new Function("return this")(),key="__prax_current_readers__",lowkey="function"==typeof Symbol?Symbol():(Math.random()*Math.pow(10,16)).toString(16);exports.autorun=autorun,exports.stop=stop;var Beacon=function(){function e(){_classCallCheck(this,e),this.readers=[]}return _createClass(e,[{key:"watch",value:function(){global[key]&&add(global[key],this.readers)}},{key:"trigger",value:function(){this.readers.splice(0).forEach(autorun)}}]),e}();exports.Beacon=Beacon;var Source=function(){function e(t){_classCallCheck(this,e),this.beacon=new Beacon,this.value=t}return _createClass(e,[{key:"read",value:function(){return this.beacon.watch(),this.value}},{key:"write",value:function(e){this.value=e,this.beacon.trigger()}}]),e}();exports.Source=Source;