"use strict";function createPrax(r){function e(r){if("function"!=typeof r)throw Error("Expected a function, got: "+r);var e=u;u=[];try{r(),u.forEach(function(e){var t=o[e]||(o[e]=[]);add(t,r)})}finally{u=e}return r}function t(r){Object.keys(o).forEach(function(e){var t=o[e],a=t.indexOf(r);~a&&t.splice(a,1)})}function a(){return u&&add(u,join.call(arguments,".")),readAtPath(r,arguments)}function n(t){var a=changedPaths(r,t,Object.keys(o));r=t;var n=[];a.forEach(function(r){var e=o[r];if(e)return e.length?void e.forEach(function(r){add(n,r)}):delete o[r]}),n.forEach(e)}var o={},u=void 0;return{autorun:e,stop:t,read:a,write:n}}function add(r,e){~r.indexOf(e)||r.push(e)}function changedPaths(r,e,t){return t.filter(function(t){if(!t)return!deepEqual(r,e);var a=t.split(".");return!deepEqual(readAtPath(r,a),readAtPath(e,a))})}var readAtPath=require("emerge").readAtPath,deepEqual=require("emerge").deepEqual,join=Array.prototype.join;exports.createPrax=createPrax;